#!/bin/bash

# bin/compile <build-dir> <cache-dir> <env-dir>

# fail fast
set -e

# parse and derive params
BUILD_DIR=$1
CACHE_DIR=$2
BUILDPACK_DIR=$(cd $(dirname ${0:-}); cd ..; pwd)

indent() {
  sed -u 's/^/       /'
}

echo "Building Tandem binary into slug" | indent
echo $BUILDPACK_DIR | indent
cp "$BUILDPACK_DIR/tandem" "$BUILD_DIR/bin/tandem"
